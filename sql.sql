
CREATE TABLE OWNER(
	Owner_id INTEGER NOT NULL AUTO_INCREMENT,
   	PRIMARY KEY(Owner_id)
);

CREATE TABLE PERSON(
	SSN CHAR(12) NOT NULL,
	Name VARCHAR(255),
	Phone CHAR(11),
	Address VARCHAR(255),
	Owner_id INTEGER ,
    PRIMARY KEY(SSN),
	FOREIGN KEY(Owner_id) REFERENCES OWNER(Owner_id) ON UPDATE CASCADE ON DELETE SET NULL
);


CREATE TABLE EMPLOYEE(
	Person_ssn CHAR(12) NOT NULL,
    Salary FLOAT,
    Shift ENUM("pm","am"),
    Working_hours FLOAT,
    PRIMARY KEY(Person_ssn),
    FOREIGN KEY(Person_ssn) REFERENCES PERSON(SSN) ON UPDATE CASCADE ON DELETE RESTRICT
);

CREATE TABLE CORPORATION(
	Name VARCHAR(255) NOT NULL,
    Phone CHAR(11),
   	Address VARCHAR(255),
   	Owner_id INTEGER NOT NULL,
   	PRIMARY KEY(Name),
    FOREIGN KEY(Owner_id) REFERENCES OWNER(Owner_id) ON UPDATE CASCADE ON DELETE RESTRICT
);
CREATE TABLE HANGAR(
	Number INTEGER NOT NULL AUTO_INCREMENT,
    Location VARCHAR(255),
   	Capacity INTEGER,
   	PRIMARY KEY(Number)
);
CREATE TABLE PLANE_TYPE(
	Model VARCHAR(10) NOT NULL,
    Capacity INTEGER,
   	Weight INTEGER,
   	PRIMARY KEY(Model)
);
CREATE TABLE AIRPLANE(
    Reg_No INTEGER NOT NULL AUTO_INCREMENT,
    Hangar_number INTEGER NOT NULL,
    Plane_model VARCHAR(10) NOT NULL,
    Owner_id INTEGER NOT NULL,
    Pdate DATE,
   	PRIMARY KEY(Reg_No),
    FOREIGN KEY(Hangar_number) REFERENCES HANGAR(Number) ON UPDATE CASCADE ON DELETE RESTRICT,
    FOREIGN KEY(Plane_model) REFERENCES PLANE_TYPE(Model) ON UPDATE CASCADE ON DELETE RESTRICT,
    FOREIGN KEY(Owner_id) REFERENCES OWNER(Owner_id) ON UPDATE CASCADE ON DELETE RESTRICT
);
CREATE TABLE PILOT(
	Emp_ssn CHAR(12) NOT NULL,
    License_No CHAR(8),
   	PRIMARY KEY(Emp_ssn),
    FOREIGN KEY(Emp_ssn) REFERENCES EMPLOYEE(Person_ssn) ON UPDATE CASCADE ON DELETE RESTRICT
);
CREATE TABLE TECHNICIAN(
	Emp_ssn CHAR(12) NOT NULL,
    Speciality VARCHAR(20),
   	PRIMARY KEY(Emp_ssn),
    FOREIGN KEY(Emp_ssn) REFERENCES EMPLOYEE(Person_ssn) ON UPDATE CASCADE ON DELETE RESTRICT
);
CREATE TABLE FLIGHT_ATTENDANT(
	Emp_ssn CHAR(12) NOT NULL,
   	PRIMARY KEY(Emp_ssn),
    FOREIGN KEY(Emp_ssn) REFERENCES EMPLOYEE(Person_ssn) ON UPDATE CASCADE ON DELETE RESTRICT
);
CREATE TABLE SPOKEN_LANGUAGE(
	Emp_ssn CHAR(12) NOT NULL,
    Language VARCHAR(12) NOT NULL,
   	PRIMARY KEY(Emp_ssn,Language),
    FOREIGN KEY(Emp_ssn) REFERENCES FLIGHT_ATTENDANT(Emp_ssn) ON UPDATE CASCADE ON DELETE RESTRICT
);
CREATE TABLE FLIES(
	Emp_ssn CHAR(12) NOT NULL,
    Model VARCHAR(10) NOT NULL,
    PRIMARY KEY(Emp_ssn,Model),
    FOREIGN KEY(Emp_ssn) REFERENCES PILOT(Emp_ssn) ON UPDATE CASCADE ON DELETE RESTRICT,
    FOREIGN KEY(Model) REFERENCES PLANE_TYPE(Model) ON UPDATE CASCADE ON DELETE RESTRICT
);


CREATE TABLE WORKS_ON(
    Emp_ssn CHAR(12) NOT NULL,
    Reg_No INTEGER NOT NULL,
    PRIMARY KEY(Emp_ssn,Reg_No),
    FOREIGN KEY(Emp_ssn) REFERENCES FLIGHT_ATTENDANT(Emp_ssn) ON UPDATE CASCADE ON DELETE RESTRICT,
    FOREIGN KEY(Reg_No) REFERENCES AIRPLANE(Reg_No) ON UPDATE CASCADE ON DELETE RESTRICT
);

CREATE TABLE SERVICE(
    Service_id INTEGER NOT NULL AUTO_INCREMENT,
    Reg_No INTEGER NOT NULL,
    Date DATE,
    Hours FLOAT,
    Workcode VARCHAR(10),
    PRIMARY KEY(Service_id,Reg_No),
    FOREIGN KEY(Reg_No) REFERENCES AIRPLANE(Reg_No) ON UPDATE CASCADE ON DELETE RESTRICT
);

CREATE TABLE MAINTAIN(
    Emp_ssn CHAR(12) NOT NULL,
    Reg_No INTEGER NOT NULL,
    Service_id INTEGER NOT NULL,
    PRIMARY KEY(Emp_ssn,Reg_No,Service_id),
    FOREIGN KEY(Emp_ssn) REFERENCES TECHNICIAN(Emp_ssn) ON UPDATE CASCADE ON DELETE RESTRICT,
    FOREIGN KEY(Reg_No) REFERENCES AIRPLANE(Reg_No) ON UPDATE CASCADE ON DELETE RESTRICT,
    FOREIGN KEY(Service_id) REFERENCES SERVICE(Service_id) ON UPDATE CASCADE ON DELETE RESTRICT
);



INSERT INTO PERSON VALUES ("123165748192","Shawn Micheals","01012744003","New Cairo",1);
INSERT INTO PERSON VALUES ("421341234123","Shawn Cena",    "01112312312","Maadi",2);
INSERT INTO PERSON VALUES ("643654654634","Eslam Tarek",   "01234123111","Nasr City",3);
INSERT INTO PERSON VALUES ("234124324132","Baher Ahmed",   "01124541412","Ainshams",4);
INSERT INTO PERSON VALUES ("678567856867","Ahmed Amr",     "01212312312","October",5);
INSERT INTO PERSON VALUES ("585694251165","Samy Amr",      "01013412341","Heliopolis",NULL);
INSERT INTO PERSON VALUES ("656835612353","Samer Mohsen",  "01132231274","Giza",NULL);
INSERT INTO PERSON VALUES ("634654865869","Aya Ahmed",     "01045634564","Dokki",NULL);
INSERT INTO PERSON VALUES ("325565153253","Anas Kfagy",    "01241234132","Downtown",NULL);
INSERT INTO PERSON VALUES ("734613566421","Yara atef",     "01122142122","Heliopolis",NULL);
INSERT INTO PERSON VALUES ("622157535795","Sara Ahmed",    "01113830952","Attaba",NULL);
INSERT INTO PERSON VALUES ("759734532512","Diaa Adel",     "01141445208","Ramsis",NULL);
INSERT INTO PERSON VALUES ("793112232244","Khaled alfath", "01523412312","Maadi",NULL);
INSERT INTO PERSON VALUES ("987353512224","Said Ahmed",    "01154563414","New Cairo",NULL);
INSERT INTO PERSON VALUES ("222115423355","Mona Tarek",    "01524161111","Ramsis",NULL);
INSERT INTO PERSON VALUES ("463566585435","Ashraf Taher",  "01245235435","Maadi",NULL);
INSERT INTO PERSON VALUES ("624234312233","Ali saad",      "01586939322","New Cairo",NULL);
INSERT INTO PERSON VALUES ("332444425444","John atef",     "01578669696","Ramsis",NULL);
INSERT INTO PERSON VALUES ("776444363252","Tom hanks",     "01222395993","Maadi",NULL);
INSERT INTO PERSON VALUES ("886544441211","Scarlet Gomes", "01012234232","Heliopolis",NULL);


INSERT INTO OWNER VALUES();
INSERT INTO OWNER VALUES();
INSERT INTO OWNER VALUES();
INSERT INTO OWNER VALUES();
INSERT INTO OWNER VALUES();
INSERT INTO OWNER VALUES();
INSERT INTO OWNER VALUES();
INSERT INTO OWNER VALUES();
INSERT INTO OWNER VALUES();
INSERT INTO OWNER VALUES();

INSERT INTO EMPLOYEE VALUES ("585694251165",2000,"am",8);
INSERT INTO EMPLOYEE VALUES ("656835612353",3000,"pm",10);
INSERT INTO EMPLOYEE VALUES ("634654865869",1500,"am",6);
INSERT INTO EMPLOYEE VALUES ("325565153253",8000,"am",10);
INSERT INTO EMPLOYEE VALUES ("734613566421",4000,"pm",8);
INSERT INTO EMPLOYEE VALUES ("622157535795",2000,"am",7);
INSERT INTO EMPLOYEE VALUES ("759734532512",5000,"am",9);
INSERT INTO EMPLOYEE VALUES ("793112232244",4000,"pm",6);
INSERT INTO EMPLOYEE VALUES ("987353512224",6000,"pm",7);
INSERT INTO EMPLOYEE VALUES ("222115423355",5000,"am",10);
INSERT INTO EMPLOYEE VALUES ("463566585435",1800,"am",9);
INSERT INTO EMPLOYEE VALUES ("624234312233",2800,"am",8);
INSERT INTO EMPLOYEE VALUES ("332444425444",1300,"pm",12);
INSERT INTO EMPLOYEE VALUES ("776444363252",6500,"am",7);
INSERT INTO EMPLOYEE VALUES ("886544441211",10000,"pm",10);


INSERT INTO TECHNICIAN VALUES ("585694251165","Engine");
INSERT INTO TECHNICIAN VALUES ("656835612353","Electrical");
INSERT INTO TECHNICIAN VALUES ("634654865869","Mechanical");
INSERT INTO TECHNICIAN VALUES ("325565153253","Electronic");
INSERT INTO TECHNICIAN VALUES ("734613566421","Engine");


INSERT INTO PILOT VALUES ("622157535795","36353532");
INSERT INTO PILOT VALUES ("759734532512","15345433");
INSERT INTO PILOT VALUES ("793112232244","46344355");
INSERT INTO PILOT VALUES ("987353512224","53522255");
INSERT INTO PILOT VALUES ("222115423355","75352353");

INSERT INTO FLIGHT_ATTENDANT VALUES ("463566585435");
INSERT INTO FLIGHT_ATTENDANT VALUES ("624234312233");
INSERT INTO FLIGHT_ATTENDANT VALUES ("332444425444");
INSERT INTO FLIGHT_ATTENDANT VALUES ("776444363252");
INSERT INTO FLIGHT_ATTENDANT VALUES ("886544441211");

INSERT INTO SPOKEN_LANGUAGE VALUES ("463566585435","English");
INSERT INTO SPOKEN_LANGUAGE VALUES ("463566585435","Deutsch");
INSERT INTO SPOKEN_LANGUAGE VALUES ("624234312233","English");
INSERT INTO SPOKEN_LANGUAGE VALUES ("624234312233","French");
INSERT INTO SPOKEN_LANGUAGE VALUES ("332444425444","English");
INSERT INTO SPOKEN_LANGUAGE VALUES ("332444425444","Spanish");
INSERT INTO SPOKEN_LANGUAGE VALUES ("776444363252","English");
INSERT INTO SPOKEN_LANGUAGE VALUES ("776444363252","Italian");
INSERT INTO SPOKEN_LANGUAGE VALUES ("886544441211","English");

INSERT INTO CORPORATION VALUES ("EGYPTAIR","00222780987","Sheraton",6);
INSERT INTO CORPORATION VALUES ("Aegean",  "00223811813","New Cairo",7);
INSERT INTO CORPORATION VALUES ("JetBlue", "00224234211","Nasr City",8);
INSERT INTO CORPORATION VALUES ("Delta Air Lines",  "00221414232","Heliopolis",9);
INSERT INTO CORPORATION VALUES ("Frontier Airlines","00222113123","New Capital",10);


INSERT INTO HANGAR VALUES (Number,"Zone A1",12);
INSERT INTO HANGAR VALUES (Number,"Zone B1",11);
INSERT INTO HANGAR VALUES (Number,"Zone C1",12);
INSERT INTO HANGAR VALUES (Number,"Zone D1",8);
INSERT INTO HANGAR VALUES (Number,"Zone E1",10);

INSERT INTO PLANE_TYPE VALUES ("C1200",200,41000);
INSERT INTO PLANE_TYPE VALUES ("CZ1211",400,80000);
INSERT INTO PLANE_TYPE VALUES ("B2000",320,65000);
INSERT INTO PLANE_TYPE VALUES ("Columbus",4,8000);
INSERT INTO PLANE_TYPE VALUES ("Sovereign",6,6000);
INSERT INTO PLANE_TYPE VALUES ("Embraer",2,5000);



INSERT INTO AIRPLANE VALUES (Reg_No,1,"C1200",6,"2010-05-12");
INSERT INTO AIRPLANE VALUES (Reg_No,1,"C1200",7,"2008-04-13");
INSERT INTO AIRPLANE VALUES (Reg_No,2,"CZ1211",8,"2004-07-22");
INSERT INTO AIRPLANE VALUES (Reg_No,2,"CZ1211",9,"2006-02-14");
INSERT INTO AIRPLANE VALUES (Reg_No,2,"C1200",9,"2011-06-17");
INSERT INTO AIRPLANE VALUES (Reg_No,2,"CZ1211",10,"2002-04-19");
INSERT INTO AIRPLANE VALUES (Reg_No,2,"B2000",10,"2011-11-12");
INSERT INTO AIRPLANE VALUES (Reg_No,3,"Columbus",1,"2013-04-20");
INSERT INTO AIRPLANE VALUES (Reg_No,4,"Sovereign",2,"2015-11-2");
INSERT INTO AIRPLANE VALUES (Reg_No,4,"Sovereign",3,"2013-6-6");
INSERT INTO AIRPLANE VALUES (Reg_No,5,"Embraer",4,"2012-7-7");
INSERT INTO AIRPLANE VALUES (Reg_No,5,"Embraer",5,"2015-1-11");


INSERT INTO FLIES VALUES ("622157535795","C1200");
INSERT INTO FLIES VALUES ("622157535795","B2000");
INSERT INTO FLIES VALUES ("793112232244","C1200");
INSERT INTO FLIES VALUES ("987353512224","CZ1211");
INSERT INTO FLIES VALUES ("987353512224","B2000");
INSERT INTO FLIES VALUES ("759734532512","Columbus");
INSERT INTO FLIES VALUES ("759734532512","Sovereign");
INSERT INTO FLIES VALUES ("759734532512","Embraer");
INSERT INTO FLIES VALUES ("222115423355","Sovereign");
INSERT INTO FLIES VALUES ("222115423355","Embraer");


INSERT INTO WORKS_ON VALUES ("463566585435",1);
INSERT INTO WORKS_ON VALUES ("463566585435",2);
INSERT INTO WORKS_ON VALUES ("624234312233",3);
INSERT INTO WORKS_ON VALUES ("332444425444",3);
INSERT INTO WORKS_ON VALUES ("332444425444",4);
INSERT INTO WORKS_ON VALUES ("776444363252",5);
INSERT INTO WORKS_ON VALUES ("886544441211",6);
INSERT INTO WORKS_ON VALUES ("886544441211",7);
INSERT INTO WORKS_ON VALUES ("886544441211",10);


INSERT INTO SERVICE VALUES (Service_id,1 ,"2012-05-12",2.5,"C122A2");
INSERT INTO SERVICE VALUES (Service_id,1 ,"2010-04-13",1.5,"D1221S");
INSERT INTO SERVICE VALUES (Service_id,2 ,"2010-07-22",4,"CD2211A");
INSERT INTO SERVICE VALUES (Service_id,3 ,"2008-02-14",2,"Z221A");
INSERT INTO SERVICE VALUES (Service_id,4 ,"2012-06-17",3,"C122A2");
INSERT INTO SERVICE VALUES (Service_id,4 ,"2003-04-19",3.5,"D1221S");
INSERT INTO SERVICE VALUES (Service_id,5 ,"2012-11-12",3,"D1221S");
INSERT INTO SERVICE VALUES (Service_id,6 ,"2014-04-20",2.5,"C122A2");
INSERT INTO SERVICE VALUES (Service_id,7 ,"2017-11-02",3.5,"E1212");
INSERT INTO SERVICE VALUES (Service_id,7 ,"2016-06-06",2,"E21SZZ");
INSERT INTO SERVICE VALUES (Service_id,8 ,"2014-07-07",3,"C122A2");
INSERT INTO SERVICE VALUES (Service_id,9 ,"2014-01-11",3,"A121AA");
INSERT INTO SERVICE VALUES (Service_id,10,"2014-06-06",2,"E21SZZ");
INSERT INTO SERVICE VALUES (Service_id,11,"2015-07-07",3,"Z221A");
INSERT INTO SERVICE VALUES (Service_id,12,"2016-01-11",2.5,"E1212");
INSERT INTO SERVICE VALUES (Service_id,12,"2017-01-11",2,"A121AA");


"585694251165"
"656835612353"
"634654865869"
"325565153253"
"734613566421"

1>>12
1>>16

INSERT INTO MAINTAIN VALUES ("585694251165",1,1);
INSERT INTO MAINTAIN VALUES ("656835612353",1,1);
INSERT INTO MAINTAIN VALUES ("656835612353",1,2);
INSERT INTO MAINTAIN VALUES ("325565153253",1,2);
INSERT INTO MAINTAIN VALUES ("734613566421",1,2);
INSERT INTO MAINTAIN VALUES ("585694251165",2,3);
INSERT INTO MAINTAIN VALUES ("656835612353",3,4);
INSERT INTO MAINTAIN VALUES ("634654865869",4,5);
INSERT INTO MAINTAIN VALUES ("325565153253",4,6);
INSERT INTO MAINTAIN VALUES ("734613566421",5,7);
INSERT INTO MAINTAIN VALUES ("325565153253",6,8);
INSERT INTO MAINTAIN VALUES ("734613566421",7,9);
INSERT INTO MAINTAIN VALUES ("585694251165",7,10);
INSERT INTO MAINTAIN VALUES ("656835612353",8,11);
INSERT INTO MAINTAIN VALUES ("634654865869",9,12);
INSERT INTO MAINTAIN VALUES ("325565153253",10,13);
INSERT INTO MAINTAIN VALUES ("734613566421",11,14);
INSERT INTO MAINTAIN VALUES ("585694251165",12,15);
INSERT INTO MAINTAIN VALUES ("656835612353",12,15);
INSERT INTO MAINTAIN VALUES ("325565153253",12,16);
INSERT INTO MAINTAIN VALUES ("734613566421",12,16);



SELECT PERSON.SSN , PERSON.Name, PERSON.Phone, EMPLOYEE.Salary, PILOT.License_No
FROM FLIES,PILOT,PERSON,EMPLOYEE,PLANE_TYPE
WHERE 
FLIES.Emp_ssn = PILOT.Emp_ssn AND 
FLIES.Model = PLANE_TYPE.Model AND 
PILOT.Emp_ssn = EMPLOYEE.Person_ssn AND
EMPLOYEE.Person_ssn = PERSON.SSN AND
PLANE_TYPE.Model = "B2000";


SELECT AIRPLANE.Reg_No, Person.Name,AIRPLANE.Plane_model
FROM AIRPLANE,HANGAR,OWNER,PERSON
WHERE
HANGAR.Number = AIRPLANE.Hangar_number AND
AIRPLANE.Owner_id = OWNER.Owner_id AND
OWNER.Owner_id = PERSON.Owner_id AND
HANGAR.Number = 4;

SELECT AVG(EMPLOYEE.Salary) 
FROM EMPLOYEE, TECHNICIAN, SERVICE , MAINTAIN
WHERE 
TECHNICIAN.Emp_ssn = EMPLOYEE.Person_ssn AND
SERVICE.Reg_No = MAINTAIN.Reg_No AND
SERVICE.Service_id = MAINTAIN.Service_id AND
MAINTAIN.Emp_ssn = TECHNICIAN.Emp_ssn
GROUP BY SERVICE.Service_id ;


SELECT PERSON.SSN , PERSON.Name, PERSON.Phone , SPOKEN_LANGUAGE.Language
FROM SPOKEN_LANGUAGE,FLIGHT_ATTENDANT,PERSON,EMPLOYEE
WHERE 
SPOKEN_LANGUAGE.Emp_ssn = FLIGHT_ATTENDANT.Emp_ssn AND 
FLIGHT_ATTENDANT.Emp_ssn = EMPLOYEE.Person_ssn AND
EMPLOYEE.Person_ssn = PERSON.SSN AND
SPOKEN_LANGUAGE.Language IN {"Deutsch","French"};

SELECT CORPORATION.Name 
FROM CORPORATION , OWNER, AIRPLANE
WHERE
CORPORATION.Owner_id = OWNER.Owner_id AND 
AIRPLANE.Owner_id = OWNER.Owner_id 
GROUP BY OWNER.Owner_id
HAVING count(*) >1;


SELECT PERSON.SSN , PERSON.Name, PERSON.Phone
FROM WORKS_ON,FLIGHT_ATTENDANT,PERSON,EMPLOYEE,AIRPLANE
WHERE 
WORKS_ON.Emp_ssn = FLIGHT_ATTENDANT.Emp_ssn AND 
WORKS_ON.Reg_No = AIRPLANE.Reg_No AND 
FLIGHT_ATTENDANT.Emp_ssn = EMPLOYEE.Person_ssn AND
EMPLOYEE.Person_ssn = PERSON.SSN AND
AIRPLANE.Plane_model = "Sovereign";
